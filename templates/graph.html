<!doctype html>
<html>
<head>
    <title>{{ title }}</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>

<script type="text/javascript">
  //Width and height
  var w = 500;
  var h = 500;
  var padding = 25;
  
  var dataset = [{{ data|safe }}];
  
  // Date functions
  var format = d3.time.format("%m/%d/%y");
  var dateFn = function(d) {return format.parse(d[0])};
  
  // Get min/max dates
  var maxdate = new Date();
  var mindate = new Date();
  for (var i = 0; i < dataset.length; i++) {
    var d = dataset[i];
    var date = dateFn(d);
    if(date > maxdate)
      maxdate = date;
    if(date < mindate)
      mindate = date;
  }
  

  //Create SVG element
  var svg = d3.select("body")
    .append("svg")
    .attr("width", w)
    .attr("height", h);

  var format = d3.time.format("%m/%d/%y");

  var xScale = d3.time.scale()
    .domain([mindate, maxdate])
    .range([padding, w - padding * 2]);

  var xAxis = d3.svg.axis()
    .orient("bottom")
    .scale(xScale);

  // Add circles
  svg.selectAll("circle")
     .data(dataset)
     .enter()
     .append("circle")
     .attr("cx", function(d) {
       return xScale(format.parse(d[0]));
     })
     .attr("cy", function(d) {
       return d[1];
      })
     .attr("r", 5);

  // Add labels
  svg.selectAll("text")
     .data(dataset)
     .enter()
     .append("text")
     .text(function(d) {
       var date = format.parse(d[0])
       return date.getMonth() + "/" + date.getDate();
     })
     .attr("x", function(d) {
       return xScale(format.parse(d[0]));
     })
     .attr("y", function(d) {
       return d[1];
     })
     .attr("font-family", "monospace")
     .attr("font-size", "10px")
     .attr("fill", "red");

  </script>

</body>
</html>
